var core=function(a,b){return{init:function(){this.unit=url_get("unit")||1;this.userId=url_get("id");var a=this;this.loadScript("data","/user/"+core.userId+"/deploy/scripts/data.js",function(){if(a.unit==2||a.unit==3){a.navigational_icon_layout()}else{a.navigational_icon_layout(renderIcons=true)}});a.loadScript("style","/mobile/extend/style_for_unit"+core.unit+".js",function(){a.setHomeScreenImage();a.logo_avatar_header_banner();a.layout();a.addEvents()});this.processCallbackQueue()},loadSpinner:function(){var a=this;this.loadScript("spinner","/mobile/scripts/"+"spin.min.js",function(){a.target=b.getElementById("spinner");a.spinner=typeof Spinner!=="undefined"?new Spinner:undefined});this.processCallbackQueue()},setProperties:function(a){this.navIcons=a.navIcons;this.custom_tab_title=a.custom_tab_title;this.base_url=a.base_url;this.base_url2=a.base_url2;this.ustreamid=a.ustreamid;this.hasUstream=this.ustreamid!==""?true:false;this.channelid=a.channelid;this.abouttitle=a.abouttitle;this.twitter=a.twitter;this.twitter_sharetext=a.twitter_sharetext;this.hashtag=a.hashtag;this.facebook=a.facebook;this.facebookID=a.facebookID;this.gid=a.gid;this.video_autoplay=1;this.count_music=0;this.numOfIcons=this.navIcons.length-1;this.navRightCount=0;this.slideSpeed=400;this.spinnerDelay=0;this.appHasMusic=core.inArray("music",this.navIcons);this.musicIsSetup=false;this.navIsSliding=0;this.isSlideDown=true;this.isThisAndroid=navigator.userAgent.toLowerCase().indexOf("android")!=-1;this.isThisIphone=navigator.platform.toLowerCase().indexOf("iphone")!=-1||navigator.platform.toLowerCase().indexOf("ipod")!=-1||false;this.isThisMobile=this.isThisAndroid==true||this.isThisIphone==true;this.shareBtn={open:{"true":"share_open","false":this.unit==3?"share2x_300_open":"share2x_open"},close:{"true":"share_close","false":this.unit==3?"share2x_300_close":"share2x_close"}}},navigational_icon_layout:function(a){var c=!a?2:core.navIcons.length-1,d=new Array,e="";for(var f=0;f<=c;f++){var g;if(this.navIcons[f]!="custom"){g=this.navIcons[f];if(this.navIcons[f]=="bio")g="about";var h="/mobile/images/icons/"+this.navIcons[f]}else{g=this.custom_tab_title;var h="/user/"+this.userId+"/deploy/userassets/tab_icon"}var i='											<div  class="iconbox"   style="background:transparent;width:'+this.style[this.unit].nav_icon_size+'px"    controller="'+this.navIcons[f]+'">												<div  class="navItemHolder addFontSize11 "   style="text-align:center;cursor:pointer"  >													<div   >														<a  id="tab_'+this.navIcons[f]+'" targetIs="panel-2"  class="navMenuLink navTextLink"  controller="'+this.navIcons[f]+'">														'+g+"														</a>													</div>												</div>";if(a){i+='												<div  class="icon_div addTextAlignCenter "   style="text-align:center;cursor:pointer;"  >													<a  targetIs="panel-2" class="navMenuLink '+this.navIcons[f]+' navIconLink"   controller="'+this.navIcons[f]+'"    >														<img   style="margin-top:7px"  class="navImg" src="'+h+'.png" />													</a>												</div>'}i+="</div>";e+=i}var j=b.getElementById("belt");j.innerHTML=e;var k=b.getElementById("footerWrapper");if(!a){k.style.bottom="-50px"}if(this.isThisMobile){k.className="norollover"}else{k.className="rolloverok"}},setHomeScreenImage:function(){var a={1:this.isThisIphone?"unitOneIphone.jpg?v="+Math.random():"unitOneAndroid.jpg?v="+Math.random(),2:"unitTwo.jpg?v="+Math.random(),3:"unitThree.jpg?v="+Math.random(),4:"unitFour.jpg?v="+Math.random()},c=function(a){var c=b.getElementById("home_img");c.style.height=core.style[core.unit].home_img_size_unit+"px";c.src="/user/"+core.userId+"/deploy/userassets/"+a},d=new Image;d.src="/user/"+core.userId+"/deploy/userassets/"+a[core.unit];d.onerror=function(){c("homescreen.jpg")};d.onload=function(){c(a[core.unit])}},logo_avatar_header_banner:function(){var a='							<div class="bannerWrapper">								<div id="logoWrapper">									<a  id="header_link" >										<img 	src="/user/'+core.userId+"/deploy/userassets/logo"+core.unit+'.jpg" />									</a>								</div>							</div>						';b.getElementById("logo_section").innerHTML=a;var c=b.getElementById("logo_section_span"),d=b.getElementById("rightTwoThirdsOfTopSection");c.style.float="left";c.style.width=core.style[core.unit].logo_section_span.width+"px";c.style.height=core.style[core.unit].logo_section_span.height+"px";c.style.marginRight=core.style[core.unit].logo_section_span.marginRight+"px";c.style.marginLeft=core.style[core.unit].logo_section_span.marginLeft+"px";c.style.overflow="hidden";d.style.paddingLeft=core.style[core.unit].rightTwoThirdsOfTopSection.paddingLeft+"px";if(core.unit==4||core.unit==2){core.loadScript("avatar","/mobile/extend/"+"avatar.js",function(){})}},layout:function(){var a=b.getElementById("contentWrapper");a.style.height=core.style[core.unit].contentWrapper.height+"px";a.style.top=core.style[core.unit].contentWrapper.top+"px";var c=b.querySelectorAll(".left_controlsInnerDivs")[1],d=b.querySelectorAll(".right_controlsInnerDivs")[0];c.style.paddingLeft=core.style[core.unit].navControls.paddingLeft+"px";d.style.paddingRight=core.style[core.unit].navControls.paddingRight+"px";var e=b.getElementById("mygallery");e.style.width=core.style[core.unit].mygallery.width+"px";if(this.hasUstream===false){var f=b.querySelectorAll(".headerBtnUstream")[0];f.parentNode.removeChild(f)}var g=b.getElementById("share_button");g.src="/mobile/images/"+this.shareBtn.open[this.hasUstream]+".gif"},inArray:function(a,b){var c=b.length;for(var d=0;d<c;d++){if(b[d]==a)return true}return false},loadGoogleAnalytics:function(){var a=("https:"==b.location.protocol?"https://ssl":"http://www")+".google-analytics.com/ga.js";core.loadScript("google_analytics_source",a,function(){});core.loadScript("googleAnalytics_core","/mobile/extend/googleAnalytics.js",function(){});core.processCallbackQueue()},addEvents:function(){var a=this,c=function(){a.loadGoogleAnalytics();a.loadSpinner();a.loadScript("jquery","http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js",function(){});a.processCallbackQueue();a.doWhenJqueryReady(function(){if(a.renderNavIconsOnce===false){a.navigational_icon_layout(renderIcons=true);a.renderNavIconsOnce=true}a.loadScript("continue","/mobile/extend/continue.js",function(){});a.processCallbackQueue();if(core.unit==2||core.unit==3){a.loadScript("nav_slide","/mobile/extend/"+"nav_slide.js",function(){if(a.isSlideDown){!a.nav_slide||a.nav_slide.up()}});a.processCallbackQueue()}});a.processCallbackQueue()};this.renderNavIconsOnce=false;if(core.unit==2|core.unit==3){this.attachEvent("footerWrapper-mouseover",b.getElementById("footerWrapper"),"mouseover",c)}else{c()}if(b.getElementById("liveStreanLink")){this.attachEvent("liveStreanLink",b.getElementById("liveStreanLink"),"click",function(){a.loadSpinner();a.loadScript("jquery","http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js",function(){});a.processCallbackQueue();a.doWhenJqueryReady(function(){a.loadGoogleAnalytics();a.loadScript("ustream","/mobile/extend/"+"ustream.js",function(){a.displayUstream()});a.processCallbackQueue()});a.processCallbackQueue()})}this.attachEvent("shareThisLink",b.getElementById("shareThisLink"),"click",function(){a.loadSpinner();a.loadScript("jquery","http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js",function(){});a.processCallbackQueue();a.doWhenJqueryReady(function(){a.loadGoogleAnalytics();a.loadScript("shareoverlay","/mobile/extend/"+"shareoverlay.js",function(){core.displayShareThis()});a.processCallbackQueue()});a.processCallbackQueue()})},events:{},attachEvent:function(a,b,c,d){if(!this.events[a]){this.events[a]=true;if(typeof b.length==="undefined"){if(b.addEventListener){b.addEventListener(c,d,false)}else if(b.attachEvent){b.attachEvent("on"+c,d)}}else{var e=b.length;for(var f=0;f<b.length;f++){if(b[f].addEventListener){b[f].addEventListener(c,d,false)}else if(b[f].attachEvent){b[f].attachEvent("on"+c,d)}}}}},scripts:{},loadScript:function(a,c,d){this.callbackQueue[a]={scripts:false,callback:d};if(!this.scripts[a]){if(typeof this.target!=="undefined"&&typeof this.spinner!=="undefined"){this.target.style.display="block";this.spinner.spin(this.target)}this.scripts[a]=c;var e=b.documentElement,f=b.createElement("script");f.async=false;f.src=c+"?v="+Math.random();var g=this,h=false;f.onload=f.onreadystatechange=function(){if(this.readyState!="loading"){h=true;if(g.callbackQueue[a]){g.callbackQueue[a].scripts=true}f.onload=f.onreadystatechange=null;if(e&&f.parentNode){e.removeChild(f)}}};e.insertBefore(f,e.firstChild)}else{this.callbackQueue[a].scripts=true}},callbackQueue:{},processCallbackQueue:function(){var a=this,b=function(){var b=true;for(name in a.callbackQueue){if(a.callbackQueue[name].scripts===false){b=false}}return b},c=function(){if(b()===false){setTimeout(function(){c()},10)}else{for(name in a.callbackQueue){a.callbackQueue[name].callback();delete a.callbackQueue[name]}a.callbackQueue={};setTimeout(function(){if(typeof a.spinner!=="undefined"){a.spinner.stop();a.target.style.display="none"}},core.spinnerDelay)}};c()},doWhenJqueryReady:function(a){var b=this;if(typeof $==="undefined"){setTimeout(function(){b.doWhenJqueryReady(a)},10)}else{a()}}}}(this,document);window.onload=function(){core.init()}